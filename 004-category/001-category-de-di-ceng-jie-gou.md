####  Category 的底层结构实现

**1、 类的每一个分类, 在编译后都会生成一份对应的C++ 文件,存储在内存中, 在整个程序的运行过程中有且只有一份**

下面是给`Person` 这个类写的一个分类,经过重写C++代码后的展示如下: 
![](/assets/Snip20190106_12.png)

从上面可以看出,每个分类都有一个自己的静态变量一直在内存中.

<br>
**2、 Category 中的 `对象方法/ 类方法/ 协议/ 属性`等, 是在程序执行过程中经过 runtime API 动态的 连接到对应的类中, 这样在类中才访问到 category 中的方法, 而不是程序一启动就加载.**


<br>
**3、Category 中的实例方法/ 类方法/ 协议/ 属性 的加载处理过程**
1> 通过 Runtime 加载某个类的所有的Category 数据
2> 把所有的Category 的方法/ 属性/ 协议数据, 合并到一个大的数组中.
3> 将合并后的分类数据(方法数组/ 属性数组/ 协议数组), 插入到原来类的数据前面(方法数据组前面/ 属性数组前面/ 协议数组前面).
4> 合并完后, 原来的类的数据数组(方法数组/ 属性数组/ 协议数组) 就变成了一个大数组, 大数组里面分类的数据就在最前面, 因此调用方法时, 分类方法会覆盖类的方法.

<br>
**4、源码的解读流程:**
![](/assets/Snip20190106_13.png)

