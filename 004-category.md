#### category


#### category 的基本使用


**1、Category 的实现原理?**
1> Category 的底层实现是 strcut category_t,  里面存储的是方法/ 协议/ 属性等信息.
2> 在程序运行时,runtime 会将Category 中的数据(方法/ 属性/ 协议) 动态的合并(插入(后编译的在前面))到类(类对象/ 元类对象)中.

分类编译后的数据结构:
![](/assets/Snip20190106_7.png)

**2、Category 和 Extension 的区别是什么?**
1> 分类中的方法/ 协议/ 属性是在程序执行时 runtime API 动态加载的
2> 类扩展和类一样, 类扩展中的方法/ 协议/ 属性 是在编译的时候就加载的到当前类(实例对象/ 类对象/ 元类对象)中了.

3、Category 中有 load 方法吗? load 方法是什么时候调用的? load 方法能继承吗? 

4、load/ initialize 方法的区别? 它们在 Category 中的调用顺序 ?  以及出现继承时它们之间的调用过程?

5、Category 能否添加成员变量? 如果可以, 如何给Category 添加成员变量?


前面我们在了解Objective-C 的本质时知道, 对象的方法是存在于类对象中, 类方法是存在于元类对象中. 

分类中的对象方法也是存在于类对象中, 分类中的类方法也是存在于元类对象中的. 但是分类的方法不是在程序加载的时候就载入 类对象或者元类对象的, 是在程序运行的过程中动态加载的.



分类中`对象方法/ 类方法/ 协议/ 属性` 在经过编译后会转换成对应的C++ 数据,如下是OC分类转换成C++后的情形:
![](/assets/Snip20190106_12.png)